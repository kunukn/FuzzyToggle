!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).FuzzyToggle=n()}(this,function(){"use strict";function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const e="undefined"!=typeof window?window:global,n=e.requestAnimationFrame?e.requestAnimationFrame.bind(e):n=>e.setTimeout(n,16),t=e.cancelAnimationFrame?e.cancelAnimationFrame.bind(e):e.clearInterval.bind(e),o=e=>((e,n,t)=>Math.min(Math.max(e,n),t))(Math.round(100*(e+1e-5))/100,0,1),i="collapsed",a="expanded",r="expanding",l="collapsing",u=Date.now,s={value:0,duration:300,trace:()=>{}};let d=e=>e===r||e===l,c=e=>e===i||e===l,m=(e={})=>{let n=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){_defineProperty(e,n,t[n])})}return e}({},s,e);return n.duration=+n.duration,[n,{value:1===n.value?1:0,motion:1===n.value?a:i,cancelled:!1,isRunning:!1,startTime:0}]};return function(e){let[s,f]=m(e),v=()=>{if(s.onUpdate){let{value:e,motion:n,hasReversed:t}=f;s.onUpdate({value:e,motion:n,hasReversed:t})}},p=()=>{if(f.cancelled)return;let{value:e,prevValue:t,elapsedTime:r}=(()=>{let e=u()-f.startTime,n=e/s.duration;return n=o(c(f.motion)?1-n:n),{elapsedTime:e,prevValue:f.value,value:n}})();f.value=e,f.elapsedTime=r,r>=s.duration?(t!==e&&v(),f.motion=c(f.motion)?i:a,f.isRunning=!1,f.cAF=null,(()=>{if(s.onDone){let{value:e,motion:n,hasReversed:t}=f;s.onDone({value:e,motion:n,hasReversed:t})}})()):(v(),f.cAF=n(p))};return{toggle:()=>{if(s.duration<=0)return;f.cancelled=!1,f.isRunning=!0,f.hasReversed=d(f.motion),f.motion=c(f.motion)?r:l,f.hasReversed&&(()=>{if(s.onReverse){let{value:e,motion:n}=f;s.onReverse({value:e,motion:n})}})();let e=u();if(f.hasReversed){let{duration:n}=s,{startTime:t}=f,o=Math.min(n,e-t),i=Math.max(0,n-o);f.startTime=e-i}else f.startTime=e;return v(),f.cAF=n(p),!0},cancel:()=>{if(!f.isRunning)return;f.cAF&&t(f.cAF),f.isRunning=!1;let e=f.motion===r?i:a;return f.motion=e,f.value=e===i?0:1,f.cancelled=!0,(()=>{if(s.onCancel){let{value:e,motion:n,hasReversed:t}=f;s.onCancel({value:e,motion:n,hasReversed:t})}})(),!0}}}});
//# sourceMappingURL=FuzzyToggle.umd.es2015.js.map
